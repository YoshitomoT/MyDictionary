<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>全単語一覧</title>

<link rel="stylesheet" th:href="@{/css/style.css}">
   
</head>
<body>
	<!--/********** ページタイトルとバージョン情報 ************************************************************/-->
    <h1>全単語一覧<small>Version0.6</small></h1>
	<!--/*********************************************************************************************/-->
	
	<!--/*********　新しい辞典と単語を追加するためのリンク ****************************************************/-->
    <p>
    	<a th:href="@{/mydictionary/dictionary/add}">新しい辞典を追加する</a>／
		<a th:href="@{/mydictionary/word/add}">新しい単語を追加する</a>
    </p>
	<!--/********************************************************************************************/-->
    
    <hr>
    
	<!--/********** 単語登録数と各辞書の単語数の表示 ************************************************************/-->
	<p>単語登録数：[[${totalWords}]]語</p>
	<ul>
		<li th:each="dict, status : ${dictList}" th:object="${dict}">
			<!-- IDが99（未定義）の場合語尾に辞書をつけない -->
			<th:block th:if="*{id == 99}">
				[[${status.index + 1}]].[[*{name}]]:[[*{wordAmount}]]語
			</th:block>
			<th:block th:if="*{id != 99}">
				[[${status.index + 1}]].[[*{name}]]辞典:[[*{wordAmount}]]語
			</th:block>
		</li>
	</ul>
	<!--/*************************************************************************************************************/-->

	<!--/********** ステータスメッセージの表示（あれば） ************************************************************/-->
	<h2 th:if="${statusMessage}">[[${statusMessage}]]</h2>
	<!--/*************************************************************************************************/-->
	 
	<!--/********** 単語一覧テーブル ************************************************************************/-->
    <table border="0.5">
        <thead>
            <tr>
                <th>辞典名</th>
                <th>単語</th>
                <th>読み方</th>
                <th>意味</th>
                <th>登録日時</th>
                <th>更新日時</th>
                <th>最後に見た日時</th>
                <th>閲覧回数</th>
                <th>操作</th> <!-- 追加 -->
            </tr>
        </thead>
        <tbody>
            <tr th:each="word : ${wordList}" th:object="${word}">
                <td>
                    <th:block  th:each="registeredDict : *{registeredDictList}">
                        <p>
                            <a th:href="@{/dictionary(id=${registeredDict.id})}">
                                [[${registeredDict.name}]]
                            </a>
                        </p>    
                    </th:block>
                </td>
                <td>
                    <a th:href="@{/mydictionary/show/word{id}/{name}(id=*{id}, name=*{name})}">
                        [[*{name}]]
                    </a>
                </td>
                <td>[[*{pronunciation}]]</td>
                <td>[[*{simpleDescription}]]</td>
                <td>[[*{#temporals.format(registeredAt, 'yyyy/MM/dd HH:mm')}]]</td>
                <td>[[*{#temporals.format(updatedAt, 'yyyy/MM/dd HH:mm')}]]</td>
                <td>[[*{#temporals.format(lastViewAt, 'yyyy/MM/dd HH:mm')}]]</td>
                <td>[[*{pageViews}]]</td>
                <td>
                    <a th:href="@{/mydictionary/word/edit(id=*{id})}">編集</a> <!-- 編集ボタン -->
                    <a 
	                    th:href="@{/mydictionary/word/delete(id=*{id})}" 
	                    onclick="return confirm('削除してもよろしいですか？')"
                    >削除</a> <!-- 削除ボタン -->
                </td>
            </tr>
        </tbody>    
    </table>
	<!--/****************************************************************************************************/-->

</body>
</html>